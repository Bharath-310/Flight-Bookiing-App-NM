{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{createContext,useState}from'react';import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";export var GeneralContext=/*#__PURE__*/createContext();var GeneralContextProvider=function GeneralContextProvider(_ref){var children=_ref.children;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),usertype=_useState8[0],setUsertype=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),ticketBookingDate=_useState10[0],setTicketBookingDate=_useState10[1];var inputs={username:username,email:email,usertype:usertype,password:password};var navigate=useNavigate();var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var loginInputs;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;loginInputs={email:email,password:password};_context2.next=4;return axios.post('http://localhost:6001/login',loginInputs).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:localStorage.setItem('userId',res.data._id);localStorage.setItem('userType',res.data.usertype);localStorage.setItem('username',res.data.username);localStorage.setItem('email',res.data.email);if(res.data.usertype==='customer'){navigate('/');}else if(res.data.usertype==='admin'){navigate('/admin');}else if(res.data.usertype==='flight-operator'){navigate('/flight-admin');}case 5:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref3.apply(this,arguments);};}()).catch(function(err){alert(\"login failed!!\");console.log(err);});case 4:_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 9:case\"end\":return _context2.stop();}},_callee2,null,[[0,6]]);}));return function login(){return _ref2.apply(this,arguments);};}();var register=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.post('http://localhost:6001/register',inputs).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(res){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:localStorage.setItem('userId',res.data._id);localStorage.setItem('userType',res.data.usertype);localStorage.setItem('username',res.data.username);localStorage.setItem('email',res.data.email);if(res.data.usertype==='customer'){navigate('/');}else if(res.data.usertype==='admin'){navigate('/admin');}else if(res.data.usertype==='flight-operator'){navigate('/flight-admin');}case 5:case\"end\":return _context3.stop();}},_callee3);}));return function(_x2){return _ref5.apply(this,arguments);};}()).catch(function(err){alert(\"registration failed!!\");console.log(err);});case 3:_context4.next=8;break;case 5:_context4.prev=5;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 8:case\"end\":return _context4.stop();}},_callee4,null,[[0,5]]);}));return function register(){return _ref4.apply(this,arguments);};}();var logout=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var key;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:localStorage.clear();for(key in localStorage){if(localStorage.hasOwnProperty(key)){localStorage.removeItem(key);}}navigate('/');case 3:case\"end\":return _context5.stop();}},_callee5);}));return function logout(){return _ref6.apply(this,arguments);};}();return/*#__PURE__*/_jsx(GeneralContext.Provider,{value:{login:login,register:register,logout:logout,username:username,setUsername:setUsername,email:email,setEmail:setEmail,password:password,setPassword:setPassword,usertype:usertype,setUsertype:setUsertype,ticketBookingDate:ticketBookingDate,setTicketBookingDate:setTicketBookingDate},children:children});};export default GeneralContextProvider;","map":{"version":3,"names":["React","createContext","useState","axios","useNavigate","jsx","_jsx","GeneralContext","GeneralContextProvider","_ref","children","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","email","setEmail","_useState5","_useState6","password","setPassword","_useState7","_useState8","usertype","setUsertype","_useState9","_useState10","ticketBookingDate","setTicketBookingDate","inputs","navigate","login","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","loginInputs","wrap","_callee2$","_context2","prev","next","post","then","_ref3","_callee","res","_callee$","_context","localStorage","setItem","data","_id","stop","_x","apply","arguments","catch","err","alert","console","log","t0","register","_ref4","_callee4","_callee4$","_context4","_ref5","_callee3","_callee3$","_context3","_x2","logout","_ref6","_callee5","key","_callee5$","_context5","clear","hasOwnProperty","removeItem","Provider","value"],"sources":["C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/src/context/GeneralContext.jsx"],"sourcesContent":["import React, { createContext, useState } from 'react';\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport const GeneralContext = createContext();\r\n\r\nconst GeneralContextProvider = ({children}) => {\r\n\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [usertype, setUsertype] = useState('');\r\n\r\n  const [ticketBookingDate, setTicketBookingDate] = useState();\r\n\r\n  const inputs = {username, email, usertype, password};\r\n\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const login = async () =>{\r\n    try{\r\n      const loginInputs = {email, password}\r\n        await axios.post('http://localhost:6001/login', loginInputs)\r\n        .then( async (res)=>{\r\n\r\n            localStorage.setItem('userId', res.data._id);\r\n            localStorage.setItem('userType', res.data.usertype);\r\n            localStorage.setItem('username', res.data.username);\r\n            localStorage.setItem('email', res.data.email);\r\n\r\n            if(res.data.usertype === 'customer'){\r\n                navigate('/');\r\n            } else if(res.data.usertype === 'admin'){\r\n                navigate('/admin');\r\n            } else if(res.data.usertype === 'flight-operator'){\r\n              navigate('/flight-admin');\r\n            }\r\n        }).catch((err) =>{\r\n            alert(\"login failed!!\");\r\n            console.log(err);\r\n        });\r\n\r\n    }catch(err){\r\n        console.log(err);\r\n    }\r\n  }\r\n  \r\n  const register = async () =>{\r\n    try{\r\n        await axios.post('http://localhost:6001/register', inputs)\r\n        .then( async (res)=>{\r\n            localStorage.setItem('userId', res.data._id);\r\n            localStorage.setItem('userType', res.data.usertype);\r\n            localStorage.setItem('username', res.data.username);\r\n            localStorage.setItem('email', res.data.email);\r\n\r\n            if(res.data.usertype === 'customer'){\r\n                navigate('/');\r\n            } else if(res.data.usertype === 'admin'){\r\n                navigate('/admin');\r\n            } else if(res.data.usertype === 'flight-operator'){\r\n              navigate('/flight-admin');\r\n            }\r\n\r\n        }).catch((err) =>{\r\n            alert(\"registration failed!!\");\r\n            console.log(err);\r\n        });\r\n    }catch(err){\r\n        console.log(err);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  const logout = async () =>{\r\n    \r\n    localStorage.clear();\r\n    for (let key in localStorage) {\r\n      if (localStorage.hasOwnProperty(key)) {\r\n        localStorage.removeItem(key);\r\n      }\r\n    }\r\n    \r\n    navigate('/');\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <GeneralContext.Provider value={{login, register, logout, username, setUsername, email, setEmail, password, setPassword, usertype, setUsertype, ticketBookingDate, setTicketBookingDate}} >{children}</GeneralContext.Provider>\r\n  )\r\n}\r\n\r\nexport default GeneralContextProvider\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
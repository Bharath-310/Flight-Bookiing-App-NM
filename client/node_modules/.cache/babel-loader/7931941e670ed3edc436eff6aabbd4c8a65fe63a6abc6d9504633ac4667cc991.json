{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from'axios';import'../styles/FlightAdmin.css';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FlightAdmin=function FlightAdmin(){var navigate=useNavigate();var _useState=useState(),_useState2=_slicedToArray(_useState,2),userDetails=_useState2[0],setUserDetails=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),bookingCount=_useState4[0],setbookingCount=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),flightsCount=_useState6[0],setFlightsCount=_useState6[1];useEffect(function(){fetchUserData();},[]);var fetchUserData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var id;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;id=localStorage.getItem('userId');_context.next=4;return axios.get(\"http://localhost:6001/fetch-user/\".concat(id)).then(function(response){setUserDetails(response.data);console.log(response.data);});case 4:_context.next=8;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);case 8:case\"end\":return _context.stop();}},_callee,null,[[0,6]]);}));return function fetchUserData(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchData();},[]);var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get('http://localhost:6001/fetch-bookings').then(function(response){setbookingCount(response.data.filter(function(booking){return booking.flightName===localStorage.getItem('username');}).length);});case 2:_context2.next=4;return axios.get('http://localhost:6001/fetch-flights').then(function(response){setFlightsCount(response.data.filter(function(booking){return booking.flightName===localStorage.getItem('username');}).length);});case 4:case\"end\":return _context2.stop();}},_callee2);}));return function fetchData(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"flightAdmin-page\",children:userDetails?/*#__PURE__*/_jsx(_Fragment,{children:userDetails.approval==='not-approved'?/*#__PURE__*/_jsxs(\"div\",{className:\"notApproved-box\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Approval Required!!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your application is under processing. It needs an approval from the administrator. Kindly please be patience!!\"})]}):userDetails.approval==='rejected'?/*#__PURE__*/_jsxs(\"div\",{className:\"notApproved-box\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Application Rejected!!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"We are sorry to inform you that your application has been rejected!!\"})]}):userDetails.approval==='approved'?/*#__PURE__*/_jsxs(\"div\",{className:\"admin-page-cards\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card admin-card transactions-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Bookings\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",bookingCount,\" \"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return navigate('/flight-bookings');},children:\"View all\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card admin-card deposits-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Flights\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",flightsCount,\" \"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return navigate('/flights');},children:\"View all\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card admin-card loans-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"New Flight\"}),/*#__PURE__*/_jsx(\"p\",{children:\" (new route) \"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return navigate('/new-flight');},children:\"Add now\"})]})]}):\"\"}):\"\"});};export default FlightAdmin;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FlightAdmin","navigate","_useState","_useState2","_slicedToArray","userDetails","setUserDetails","_useState3","_useState4","bookingCount","setbookingCount","_useState5","_useState6","flightsCount","setFlightsCount","fetchUserData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","id","wrap","_callee$","_context","prev","next","localStorage","getItem","get","concat","then","response","data","console","log","t0","stop","apply","arguments","fetchData","_ref2","_callee2","_callee2$","_context2","filter","booking","flightName","length","className","children","approval","onClick"],"sources":["C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/src/pages/FlightAdmin.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport axios from 'axios'\r\nimport '../styles/FlightAdmin.css'\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst FlightAdmin = () => {\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const [userDetails, setUserDetails] = useState();\r\n  const [bookingCount, setbookingCount] = useState(0);\r\n  const [flightsCount, setFlightsCount] = useState(0);\r\n\r\n  useEffect(()=>{\r\n    fetchUserData();\r\n  }, [])\r\n\r\n  const fetchUserData = async () =>{\r\n    try{\r\n      const id = localStorage.getItem('userId');\r\n      await axios.get(`http://localhost:6001/fetch-user/${id}`).then(\r\n        (response)=>{\r\n          setUserDetails(response.data);\r\n          console.log(response.data);\r\n        }\r\n      )\r\n\r\n    }catch(err){\r\n\r\n    }\r\n  } \r\n\r\n\r\n  useEffect(()=>{\r\n\r\n    fetchData();\r\n  }, [])\r\n\r\n  const fetchData = async () =>{\r\n    await axios.get('http://localhost:6001/fetch-bookings').then(\r\n      (response)=>{\r\n        setbookingCount(response.data.filter(booking => booking.flightName === localStorage.getItem('username')).length);\r\n      }\r\n    );\r\n    await axios.get('http://localhost:6001/fetch-flights').then(\r\n      (response)=>{\r\n        setFlightsCount(response.data.filter(booking => booking.flightName === localStorage.getItem('username')).length);\r\n      }\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flightAdmin-page\">\r\n\r\n      {userDetails ?\r\n        <>\r\n          {userDetails.approval === 'not-approved' ?\r\n            <div className=\"notApproved-box\">\r\n              <h3>Approval Required!!</h3>\r\n              <p>Your application is under processing. It needs an approval from the administrator. Kindly please be patience!!</p>\r\n            </div>\r\n\r\n\r\n          : userDetails.approval === 'rejected' ?\r\n            <div className=\"notApproved-box\">\r\n              <h3>Application Rejected!!</h3>\r\n              <p>We are sorry to inform you that your application has been rejected!!</p>\r\n          </div>\r\n          : userDetails.approval === 'approved' ?\r\n            \r\n\r\n          <div className=\"admin-page-cards\">\r\n\r\n          <div className=\"card admin-card transactions-card\">\r\n              <h4>Bookings</h4>\r\n              <p> {bookingCount} </p>\r\n              <button className=\"btn btn-primary\" onClick={()=>navigate('/flight-bookings')}>View all</button>\r\n          </div>\r\n\r\n          <div className=\"card admin-card deposits-card\">\r\n              <h4>Flights</h4>\r\n              <p> {flightsCount} </p>\r\n              <button className=\"btn btn-primary\" onClick={()=>navigate('/flights')}>View all</button>\r\n          </div>\r\n\r\n          <div className=\"card admin-card loans-card\">\r\n              <h4>New Flight</h4>\r\n              <p> (new route) </p>\r\n              <button className=\"btn btn-primary\" onClick={()=>navigate('/new-flight')}>Add now</button>\r\n          </div>\r\n\r\n      </div>\r\n\r\n          :\r\n            \"\"\r\n          }\r\n        </>\r\n      :\r\n       \"\"\r\n      }\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FlightAdmin"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
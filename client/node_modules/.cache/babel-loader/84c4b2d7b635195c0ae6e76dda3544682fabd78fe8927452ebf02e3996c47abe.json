{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import'../styles/Admin.css';import{useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Admin=function Admin(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),userCount=_useState4[0],setUserCount=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),bookingCount=_useState6[0],setbookingCount=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),flightsCount=_useState8[0],setFlightsCount=_useState8[1];useEffect(function(){fetchData();},[]);var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('http://localhost:6001/fetch-users').then(function(response){setUserCount(response.data.length-1);setUsers(response.data.filter(function(user){return user.approval==='not-approved';}));});case 2:_context.next=4;return axios.get('http://localhost:6001/fetch-bookings').then(function(response){setbookingCount(response.data.length);});case 4:_context.next=6;return axios.get('http://localhost:6001/fetch-flights').then(function(response){setFlightsCount(response.data.length);});case 6:case\"end\":return _context.stop();}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();var approveRequest=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post('http://localhost:6001/approve-operator',{id:id}).then(function(response){alert(\"Operator approved!!\");fetchData();});case 3:_context2.next=7;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);case 7:case\"end\":return _context2.stop();}},_callee2,null,[[0,5]]);}));return function approveRequest(_x){return _ref2.apply(this,arguments);};}();var rejectRequest=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.post('http://localhost:6001/reject-operator',{id:id}).then(function(response){alert(\"Operator rejected!!\");fetchData();});case 3:_context3.next=7;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);case 7:case\"end\":return _context3.stop();}},_callee3,null,[[0,5]]);}));return function rejectRequest(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"admin-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-page-cards\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card admin-card users-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Users\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",userCount,\" \"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return navigate('/all-users');},children:\"View all\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card admin-card transactions-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Bookings\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",bookingCount,\" \"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return navigate('/all-bookings');},children:\"View all\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card admin-card deposits-card\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Flights\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",flightsCount,\" \"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return navigate('/all-flights');},children:\"View all\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-requests-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"New Operator Applications\"}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-requests\",children:users.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No new requests..\"}):/*#__PURE__*/_jsx(_Fragment,{children:users.map(function(user){return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-request\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Operator name: \"}),\" \",user.username]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Operator email: \"}),\" \",user.email]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-request-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return approveRequest(user._id);},children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return rejectRequest(user._id);},children:\"Reject\"})]})]},user._id);})})})]})]})});};export default Admin;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Admin","navigate","_useState","_useState2","_slicedToArray","users","setUsers","_useState3","_useState4","userCount","setUserCount","_useState5","_useState6","bookingCount","setbookingCount","_useState7","_useState8","flightsCount","setFlightsCount","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","get","then","response","data","length","filter","user","approval","stop","apply","arguments","approveRequest","_ref2","_callee2","id","_callee2$","_context2","post","alert","t0","_x","rejectRequest","_ref3","_callee3","_callee3$","_context3","_x2","children","className","onClick","map","username","email","_id"],"sources":["C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/src/pages/Admin.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport '../styles/Admin.css'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport axios from 'axios'\r\n\r\nconst Admin = () => {\r\n\r\n  const navigate = useNavigate();\r\n  const [users, setUsers] = useState([]);\r\n  const [userCount, setUserCount] = useState(0);\r\n  const [bookingCount, setbookingCount] = useState(0);\r\n  const [flightsCount, setFlightsCount] = useState(0);\r\n\r\n\r\n  useEffect(()=>{\r\n\r\n    fetchData();\r\n  }, [])\r\n\r\n  const fetchData = async () =>{\r\n    await axios.get('http://localhost:6001/fetch-users').then(\r\n      (response)=>{\r\n        \r\n        setUserCount(response.data.length -1);\r\n        setUsers(response.data.filter(user => user.approval === 'not-approved'));\r\n      }\r\n    );\r\n    await axios.get('http://localhost:6001/fetch-bookings').then(\r\n      (response)=>{\r\n        setbookingCount(response.data.length);\r\n      }\r\n    );\r\n    await axios.get('http://localhost:6001/fetch-flights').then(\r\n      (response)=>{\r\n        setFlightsCount(response.data.length);\r\n      }\r\n    );\r\n  }\r\n\r\n\r\n\r\n  const approveRequest = async (id) =>{\r\n      try{\r\n\r\n          await axios.post('http://localhost:6001/approve-operator', {id}).then(\r\n            (response)=>{\r\n              alert(\"Operator approved!!\");\r\n              fetchData();\r\n            }\r\n          )\r\n\r\n      }catch(err){\r\n\r\n      }\r\n  }\r\n\r\n  const rejectRequest = async (id) =>{\r\n    try{\r\n\r\n      await axios.post('http://localhost:6001/reject-operator', {id}).then(\r\n        (response)=>{\r\n          alert(\"Operator rejected!!\");\r\n          fetchData();\r\n        }\r\n      )\r\n\r\n    }catch(err){\r\n\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n\r\n      <div className=\"admin-page\">\r\n\r\n        <div className=\"admin-page-cards\">\r\n\r\n            <div className=\"card admin-card users-card\">\r\n                <h4>Users</h4>\r\n                <p> {userCount} </p>\r\n                <button className=\"btn btn-primary\" onClick={()=>navigate('/all-users')}>View all</button>\r\n            </div>\r\n\r\n            <div className=\"card admin-card transactions-card\">\r\n                <h4>Bookings</h4>\r\n                <p> {bookingCount} </p>\r\n                <button className=\"btn btn-primary\" onClick={()=>navigate('/all-bookings')}>View all</button>\r\n            </div>\r\n\r\n            <div className=\"card admin-card deposits-card\">\r\n                <h4>Flights</h4>\r\n                <p> {flightsCount} </p>\r\n                <button className=\"btn btn-primary\" onClick={()=>navigate('/all-flights')}>View all</button>\r\n            </div>\r\n\r\n\r\n        </div>\r\n\r\n        <div className=\"admin-requests-container\">\r\n\r\n            <h3>New Operator Applications</h3>\r\n\r\n            <div className=\"admin-requests\">\r\n\r\n              {\r\n                users.length === 0 ?\r\n                  <p>No new requests..</p>\r\n                :\r\n                  <>\r\n                  {users.map((user)=>{\r\n                    return(\r\n                      <div className=\"admin-request\" key={user._id}>\r\n                        <span><b>Operator name: </b> {user.username}</span>\r\n                        <span><b>Operator email: </b> {user.email}</span>\r\n                        <div className=\"admin-request-actions\">\r\n                          <button className='btn btn-primary' onClick={()=> approveRequest(user._id)}>Approve</button>\r\n                          <button className='btn btn-danger' onClick={()=> rejectRequest(user._id)}>Reject</button>\r\n                        </div>\r\n                      </div>\r\n                    )\r\n                  })}\r\n                  </>\r\n\r\n              }\r\n\r\n\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n    \r\n    </>\r\n  )\r\n}\r\n\r\nexport default Admin"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
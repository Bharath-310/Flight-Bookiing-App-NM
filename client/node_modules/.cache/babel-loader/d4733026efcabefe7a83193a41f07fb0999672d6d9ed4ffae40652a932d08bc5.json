{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import'../styles/Bookings.css';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Bookings=function Bookings(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),bookings=_useState2[0],setBookings=_useState2[1];var userId=localStorage.getItem('userId');useEffect(function(){fetchBookings();},[]);var fetchBookings=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('http://localhost:6001/fetch-bookings').then(function(response){setBookings(response.data.reverse());});case 2:case\"end\":return _context.stop();}},_callee);}));return function fetchBookings(){return _ref.apply(this,arguments);};}();var cancelTicket=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.put(\"http://localhost:6001/cancel-ticket/\".concat(id)).then(function(response){alert(\"Ticket cancelled!!\");fetchBookings();});case 2:case\"end\":return _context2.stop();}},_callee2);}));return function cancelTicket(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"user-bookingsPage\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Bookings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"user-bookings\",children:bookings.filter(function(booking){return booking.user===userId;}).map(function(booking){return/*#__PURE__*/_jsxs(\"div\",{className:\"user-booking\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Booking ID:\"}),\" \",booking._id]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Mobile:\"}),\" \",booking.mobile]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Email:\"}),\" \",booking.email]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Flight Id:\"}),\" \",booking.flightId]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Flight name:\"}),\" \",booking.flightName]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"On-boarding:\"}),\" \",booking.departure]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Destination:\"}),\" \",booking.destination]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"Passengers:\"})}),/*#__PURE__*/_jsx(\"ol\",{children:booking.passengers.map(function(passenger,i){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Name:\"}),\" \",passenger.name,\",  \",/*#__PURE__*/_jsx(\"b\",{children:\"Age:\"}),\" \",passenger.age]})},i);})})]}),booking.bookingStatus==='confirmed'?/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Seats:\"}),\" \",booking.seats]}):\"\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Booking date:\"}),\" \",booking.bookingDate.slice(0,10)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Journey date:\"}),\" \",booking.journeyDate.slice(0,10)]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Journey Time:\"}),\" \",booking.journeyTime]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Total price:\"}),\" \",booking.totalPrice]})]}),booking.bookingStatus==='cancelled'?/*#__PURE__*/_jsxs(\"p\",{style:{color:\"red\"},children:[/*#__PURE__*/_jsx(\"b\",{children:\"Booking status:\"}),\" \",booking.bookingStatus]}):/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Booking status:\"}),\" \",booking.bookingStatus]}),booking.bookingStatus==='confirmed'?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return cancelTicket(booking._id);},children:\"Cancel Ticket\"})}):/*#__PURE__*/_jsx(_Fragment,{})]},booking._id);})})]});};export default Bookings;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Bookings","_useState","_useState2","_slicedToArray","bookings","setBookings","userId","localStorage","getItem","fetchBookings","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","get","then","response","data","reverse","stop","apply","arguments","cancelTicket","_ref2","_callee2","id","_callee2$","_context2","put","concat","alert","_x","className","children","filter","booking","user","map","_id","mobile","email","flightId","flightName","departure","destination","passengers","passenger","i","name","age","bookingStatus","seats","bookingDate","slice","journeyDate","journeyTime","totalPrice","style","color","onClick"],"sources":["C:/Users/Prince/Downloads/fba/Flight-Booking-App-MERN-main/client/src/pages/Bookings.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport '../styles/Bookings.css'\r\nimport axios from 'axios';\r\n\r\nconst Bookings = () => {\r\n\r\n\r\n  const [bookings, setBookings] = useState([]);\r\n\r\n  const userId = localStorage.getItem('userId');\r\n\r\n  useEffect(()=>{\r\n    fetchBookings();\r\n  }, [])\r\n\r\n  const fetchBookings = async () =>{\r\n    await axios.get('http://localhost:6001/fetch-bookings').then(\r\n      (response)=>{\r\n        setBookings(response.data.reverse());\r\n      }\r\n    )\r\n  }\r\n  const cancelTicket = async (id) =>{\r\n    await axios.put(`http://localhost:6001/cancel-ticket/${id}`).then(\r\n      (response)=>{\r\n        alert(\"Ticket cancelled!!\");\r\n        fetchBookings();\r\n      }\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"user-bookingsPage\">\r\n      <h1>Bookings</h1>\r\n\r\n      <div className=\"user-bookings\">\r\n\r\n        {bookings.filter(booking=> booking.user === userId).map((booking)=>{\r\n          return(\r\n            <div className=\"user-booking\" key={booking._id}>\r\n            <p><b>Booking ID:</b> {booking._id}</p>\r\n            <span>\r\n              <p><b>Mobile:</b> {booking.mobile}</p>\r\n              <p><b>Email:</b> {booking.email}</p>\r\n            </span>\r\n            <span>\r\n              <p><b>Flight Id:</b> {booking.flightId}</p>\r\n              <p><b>Flight name:</b> {booking.flightName}</p>\r\n            </span>\r\n            <span>\r\n              <p><b>On-boarding:</b> {booking.departure}</p>\r\n              <p><b>Destination:</b> {booking.destination}</p>\r\n            </span>\r\n            <span>\r\n\r\n              <div>\r\n                <p><b>Passengers:</b></p>\r\n                <ol>\r\n                  {booking.passengers.map((passenger, i)=>{\r\n                    return(\r\n                      <li key={i}><p><b>Name:</b> {passenger.name},  <b>Age:</b> {passenger.age}</p></li>\r\n                    )\r\n                  })}\r\n                </ol>\r\n              </div>\r\n              {booking.bookingStatus === 'confirmed' ? <p><b>Seats:</b> {booking.seats}</p> : \"\"}\r\n              \r\n            </span>\r\n            <span>\r\n              <p><b>Booking date:</b> {booking.bookingDate.slice(0,10)}</p>\r\n              <p><b>Journey date:</b> {booking.journeyDate.slice(0,10)}</p>\r\n            </span>\r\n            <span>\r\n              <p><b>Journey Time:</b> {booking.journeyTime}</p>\r\n              <p><b>Total price:</b> {booking.totalPrice}</p>\r\n            </span>\r\n              {booking.bookingStatus === 'cancelled' ?\r\n                <p style={{color: \"red\"}}><b>Booking status:</b> {booking.bookingStatus}</p>\r\n                :\r\n                <p><b>Booking status:</b> {booking.bookingStatus}</p>\r\n              }\r\n            {booking.bookingStatus === 'confirmed' ?\r\n              <div>\r\n                <button className=\"btn btn-danger\" onClick={()=> cancelTicket(booking._id)}>Cancel Ticket</button>\r\n              </div>\r\n            \r\n            :\r\n            <></>}\r\n          </div>\r\n          )\r\n        })}\r\n\r\n          \r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Bookings"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}